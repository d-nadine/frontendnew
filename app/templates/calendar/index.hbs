<div class="calendar-toolbar">
  <h3 class="calendar-date-title pull-left">
    <i class="ss-standard ss-calendar month-datepicker-button"></i> {{formatDateTime date format="monthYear"}}
  </h3>
  <div class="btn-group pull-left">
    {{#linkTo "calendar.index" lastMonth class="btn calendar-month-btn"}}
      <i class="ss-standard ss-directleft"></i>
    {{/linkTo}}

    {{#linkTo "calendar.index" nextMonth class="btn calendar-month-btn"}}
      <i class="ss-standard ss-directright"></i>
    {{/linkTo}}
  </div>
</div>
<div>
  {{render "form_box" formBox}}
</div>

{{#if isLoading}}
  {{partial 'is_loading'}}
{{/if}}

<table class="calendar">
  <colgroup class="weekdays">
    <col class="monday" />
    <col class="tuesday" />
    <col class="wednesday" />
    <col class="thrusday" />
    <col class="friday" />
  </colgroup>
  <colgroup class="weekend">
    <col class="saturday" />
    <col class="sunday" />
  </colgroup>

  <thead>
    <tr>
      {{#each dayNames}}
        <th>{{this}}</th>
      {{/each}}
    </tr>
  </thead>
  <tbody>
    {{#each weeks}}
      <tr>
        {{#each calendarDay in this itemController="calendarDayItem"}}
          <td {{action selectDay this bubbles=false}} {{bindAttr class="calendarDay.isDifferentMonth calendarDay.isToday calendarDay.isSelectedDate :day"}}>
            <div class="wrapper">
              <span class="date">
                {{#if calendarDay.isToday}}
                  Today
                {{else}}
                  {{calendarDay.day}}
                {{/if}}
              </span>

              <ul>
                {{#each calendarDay.visibleContent class="unstyled" itemController="calendarTaskItem" }}
                <li {{bindAttr class=":day-event-item controller.isSelected:is-selected"}}>
                  <a href="#" {{action selectCalendarTask this target="calendarDay"}}>
                    {{formatDateTime time}}
                    <span class="day-event-item-description">{{title}}</span>
                  </a>
                </i>
                {{/each}}
              </ul>
            </div>
            {{#if calendarDay.hiddenContent}}
              <a class="btn-slab" {{action showMore target="calendarDay"}}>▪▪▪</a>
            {{/if}}
          </td>
        {{/each}}
      </tr>
    {{/each}}
  </tbody>
</table>
