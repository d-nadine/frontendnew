<div class="checklist block">
  <h3><i class="icon-plus"></i>New Deal</h3>
</div>
<div class="secondary">
  <form class="form form-horizontal">
    <fieldset>
      <div class="control-group">
        <label class="control-label">Deal Name</label>
        <div class="controls">
          {{view view.name class="field input-xlarge" placeholder="Deal Name"}}
        </div>
      </div>
      <div class="control-group">
        <label class="control-label">Contact</label>
        <div class="controls">
          {{view view.contactPicker}}
        </div>
      </div>
      <div class="control-group">
        <label class="control-label">Assigned To</label>
        <div class="controls">
          {{view view.userPicker}}
        </div>
      </div>
      <div class="control-group">
        <label class="control-label">Description</label>
        <div class="controls">
          {{view view.description placeholder="Description" classNames="field input-xxlarge"}}
        </div>
      </div>
      {{#if reference}}
        <div class="control-group">
          <label class="control-label">Related to</label>
          <div class="controls">
            <!-- FIXME : create linkToResource -->
            {{#linkTo unimplemented}}{{view.referenceName}}{{/linkTo}}
          </div>
        </div>
      {{/if}}
      <div class="control-group">
        <label class="control-label">Source</label>
        <div class="controls">
          {{view Ember.TextField valueBinding="source" class="field input-xxlarge"}}
        </div>
      </div>
      <hr/>
      <div class="control-group">
        <label class="control-label">Deal Status</label>
        <div class="controls">
        </div>
      </div>
      <div class="control-group total">
        <label class="control-label" {{action toggleChecklist target="view" bubbles="false"}}>Checklist <i {{bindAttr class="view.showChecklistItems:icon-minus:icon-plus"}}></i></label>
        <div class="checklist-total">
          <label>{{total}}%</label>
        </div>
      </div>
      <div class="control-group checklist-items-container">
        <div class="checklist-items">
          <table>
            <tbody>
              {{#each checklistItem in checklist.checklistItems}}
                {{#with checklistItem}}
                  <tr>
                    <td><i class="icon-{{unbound kind}}"></i></td>
                    <td class="check">
                      <label>
                        {{view view.isFinished checkedBinding="isFinished" selectedBinding="this"}}
                        {{description}}
                      </label>
                    </td>
                    <td {{bindAttr class="isFinished:is-finished:muted"}}>{{weight}}%</td>
                  </tr>
                {{/with}}
              {{/each}}
            </tbody>
          </table>
          <p class="extra-checklist-item muted">FIXME:  Supply some copy that describes why there are fields for an extra check list item</p>
          <table>
            <tbody>
              <tr>
                <td>Description</td>
                <td>
                  {{view Ember.TextField valueBinding="additionalChecklistItem.description" class="field input-xxlarge"}}
                </td>
              </tr>
              <tr>
                <td>Percentage</td>
                <td>
                  {{view Ember.TextField type="number" valueBinding="additionalChecklistItem.description" class="field input-mini"}}%
                </td>
              </tr>
            </tbody>
          </table>

          <div class="checklist-progress">
            {{view view.progressBar}}
          </div>
        </div>
      </div>
      <hr/>
    </fieldset>
  </form>
</div>
